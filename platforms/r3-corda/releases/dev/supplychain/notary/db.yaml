apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: notarydb
  annotations:
    fluxcd.io/automated: "false"
  namespace: supplychain-ns
spec:
  releaseName: notarydb
  interval: 1m
  chart:
    spec:
      chart: platforms/r3-corda/charts/corda-h2
      sourceRef:
        kind: GitRepository
        name: flux-corda
        namespace: flux-corda
  values:
    replicaCount: 1
    nodeName: notary
    metadata:
      namespace: supplychain-ns
    image:
      containerName: ghcr.io/hyperledger/h2:2018
      imagePullSecret: regcred
    resources:
      limits: "512Mi"
      requests: "512Mi"
    storage:
      memory: 512Mi
      mountPath: "/opt/h2-data"
      name: supplychain-bevel-storageclass
    service:
      type: NodePort
      p2p:
        port: 10002
      rpc:
        port: 10003
      rpcadmin:
        port: 10005
      tcp:
        port: 9101
        targetPort: 1521
      web:
        targetPort: 81
        port: 8080
      annotations: {}
    deployment:
      annotations: {}
    pvc:
      annotations: {}
